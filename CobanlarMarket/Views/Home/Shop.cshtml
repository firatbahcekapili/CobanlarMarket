@model CobanlarMarket.Models.AllViewModel

@{
    ViewBag.Title = "Shop";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
<style>
    .categorylist li.active > a {
        color: red !important;
    }
</style>
<!--<style>
    .slick-list {
        width: 100%;
        overflow: hidden;
    }

    .slick-track {
        display: flex;
    }

    .slick-slide {
        height: auto; /* Dinamik yükseklik */
        min-height: 100px; /* Minimum yükseklik */
        display: flex;
        justify-content: center;
        align-items: center;
    }
</style>

<body cz-shortcut-listen="true">
    <div id="root">
        <div>
            <div class="main-layout">
                <div class="modal-dialog">
                    <div class="modal-content">
                        :<button class="modal-close"><i class="bi bi-x"></i></button>
                        <div class="modal-image">
                            <img src="/img/modal-dialog.jpg" alt="" />
                        </div>
                        <div class="popup-wrapper">
                            <div class="popup-content">
                                <div class="popup-title"><h3>YENİ ÜRÜNLER</h3></div>
                                <p class="popup-text">
                                    Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                                    Laborum, voluptates.
                                </p>
                                <form class="popup-form">
                                    <input type="text"
                                           placeholder="Enter Email Adress Here" /><button class="btn btn-lg btn-red">
                                        ABONE OL
                                    </button><label>
                                        <input type="checkbox" /><span>Lorem ipsum dolor sit.</span>
                                    </label>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="modal-overlay"></div>
                </div>

                <section class="categories">
                    <div class="container">
                        <div class="section-title">
                            <h2>TÜM KATEGORİLER</h2>
                            <p>yaz Koleksiyiyonleri karsinizda</p>
                        </div>
                        <div>
                            <ul class="category-list">

                                @foreach (var category in Model.categories)
                                {
                                    <li class="category-item">
                                        <a href="#">
                                            <img src="~/img/categories/categories1.png"
                                                 class="category-image"
                                                 alt="" /><span class="category-title">@category.name</span>
                                            </a>
                                        </li>
                                }
                            </ul>
                        </div>
                    </div>
                </section>
                <section class="products" style="padding:0 50px 0 50px;">
                    <div class="product-wrapper glide">
                        <div class="slick-slider slick-initialized" dir="ltr">
                            <button class="glide__arrow glide__arrow--left">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <div class="slick-list">


                                @{
                                    int i = -1;
                                }
                                @foreach (var product in Model.products)
                                {

                                    <div data-index="@i"
                                         tabindex="@i"
                                         class="slick-slide slick-cloned"
                                         aria-hidden="true"
                                         style="width: 450px">
                                        <div>
                                            <div class="product-item glide__slide glide__slide--active">
                                                <div class="product-image">
                                                    <a href="/Home/Product/@product.id">
                                                        @if (product.cover != null)
                                                        {
                                                            <img src="@product.cover"
                                                                 alt=""
                                                                 class="img1" />
                                                        }
                                                        else
                                                        {
                                                            <img src="~/Content/theme/images/empty.png"
                                                                 alt=""
                                                                 class="img1" />
                                                        }

                                                    </a>
                                                </div>
                                                <div class="product-info">
                                                    <a href="#" class="product-title">@product.name</a>
                                                    <ul class="product-star">
                                                        <li><i class="bi bi-star-fill"></i></li>
                                                        <li><i class="bi bi-star-fill"></i></li>
                                                        <li><i class="bi bi-star-fill"></i></li>
                                                        <li><i class="bi bi-star-fill"></i></li>
                                                        <li><i class="bi bi-star-half"></i></li>
                                                    </ul>
                                                    <div class="product-prices">
                                                        <strong class="new-price">&#8378;@product.products_skus.FirstOrDefault(x => x.product_id == product.id).price</strong><span class="old-price">&#8378;300.00</span>
                                                    </div>
                                                    <span class="product-discount">-99%</span>
                                                    <div class="product-links">
                                                        <button>
                                                            <i class="bi bi-basket-fill"></i>
                                                        </button><button>
                                                            <i class="bi bi-heart-fill"></i>
                                                        </button><a class="product-link" href="/product/@product.id"><i class="bi bi-eye-fill"></i></a><a href="#">
                                                            <i class="bi bi-share-fill"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                }-->
@*<div data-index="0"
         class="slick-slide"
         tabindex="-1"
         aria-hidden="true"
         style="outline: none; width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product1/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product1/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Analogue For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$1655.00</span>
                    </div>
                    <span class="product-discount">-52%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/1"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="1"
         class="slick-slide"
         tabindex="-1"
         aria-hidden="true"
         style="outline: none; width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product2/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product2/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Gvuf For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$177.00</span>
                    </div>
                    <span class="product-discount">-17%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/2"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="2"
         class="slick-slide slick-active slick-current"
         tabindex="-1"
         aria-hidden="false"
         style="outline: none; width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product3/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product3/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Mai For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$110.00</strong><span class="old-price">$165.00</span>
                    </div>
                    <span class="product-discount">-22%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/3"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="3"
         class="slick-slide"
         tabindex="-1"
         aria-hidden="true"
         style="outline: none; width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product4/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product4/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Pro For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$100.00</strong><span class="old-price">$165.00</span>
                    </div>
                    <span class="product-discount">-0%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/4"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="4"
         class="slick-slide"
         tabindex="-1"
         aria-hidden="true"
         style="outline: none; width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product5/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product5/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Babagg For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$300.00</span>
                    </div>
                    <span class="product-discount">-99%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/5"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="5"
         tabindex="-1"
         class="slick-slide slick-cloned"
         aria-hidden="true"
         style="width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product1/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product1/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Analogue For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$1655.00</span>
                    </div>
                    <span class="product-discount">-52%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/1"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="6"
         tabindex="-1"
         class="slick-slide slick-cloned"
         aria-hidden="true"
         style="width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product2/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product2/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Gvuf For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$177.00</span>
                    </div>
                    <span class="product-discount">-17%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/2"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="7"
         tabindex="-1"
         class="slick-slide slick-cloned"
         aria-hidden="true"
         style="width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product3/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product3/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Mai For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$110.00</strong><span class="old-price">$165.00</span>
                    </div>
                    <span class="product-discount">-22%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/3"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div data-index="8"
         tabindex="-1"
         class="slick-slide slick-cloned"
         aria-hidden="true"
         style="width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product4/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product4/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Pro For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$100.00</strong><span class="old-price">$165.00</span>
                    </div>
                    <span class="product-discount">-0%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/4"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div data-index="9"
         tabindex="-1"
         class="slick-slide slick-cloned"
         aria-hidden="true"
         style="width: 450px">
        <div>
            <div class="product-item glide__slide glide__slide--active">
                <div class="product-image">
                    <a href="#">
                        <img src="~/img/products/product5/1.png"
                             alt=""
                             class="img1" /><img src="~/img/products/product5/2.png"
                                                 alt=""
                                                 class="img2" />
                    </a>
                </div>
                <div class="product-info">
                    <a href="#" class="product-title">Babagg For you</a>
                    <ul class="product-star">
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-fill"></i></li>
                        <li><i class="bi bi-star-half"></i></li>
                    </ul>
                    <div class="product-prices">
                        <strong class="new-price">$108.00</strong><span class="old-price">$300.00</span>
                    </div>
                    <span class="product-discount">-99%</span>
                    <div class="product-links">
                        <button>
                            <i class="bi bi-basket-fill"></i>
                        </button><button>
                            <i class="bi bi-heart-fill"></i>
                        </button><a class="product-link" href="/product/5"><i class="bi bi-eye-fill"></i></a><a href="#">
                            <i class="bi bi-share-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>*@

<!--</div>
                            <button class="glide__arrow glide__arrow--right">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                </section>
                <section class="campaing-single">
                    <div class="container">
                        <div class="campaing-wrapper">
                            <h2>New Season Better</h2>
                            <strong>40% INDIRIM</strong><span></span><a href="#" class="btn btn-lg btn-red">
                                ALIŞVERIS YAP<i class="bi bi-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </section>

            </div>
        </div>
    </div>

</body>
<script>


    $('.slick-list').slick({
        slidesToShow: 5,
        slidesToScroll: 1,
        autoplay: true,
        autoplaySpeed: 2000,
        nextArrow: '.glide__arrow--right',
        prevArrow: '.glide__arrow--left',
        responsive: [
            {
                breakpoint: 1024,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 1
                }
            },
            {
                breakpoint: 600,
                settings: {
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }
        ]
    });




</script>-->

<link href="~/Content/css/shoppage/style.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap-grid.min.css" integrity="sha512-i1b/nzkVo97VN5WbEtaPebBG8REvjWeqNclJ6AItj7msdVcaveKrlIIByDpvjk5nwHjXkIqGZscVxOrTb9tsMA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://kit.fontawesome.com/00c5ff292c.js" crossorigin="anonymous"></script>
<link href="~/Content/css/shoppage/jquery-ui.min.css" rel="stylesheet" />
<link href="~/Content/css/shoppage/nice-select.css" rel="stylesheet" />
<link href="~/Content/css/shoppage/owl.carousel.min.css" rel="stylesheet" />



<!-- Product Section Begin -->
<section class="product spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-5">
                <div class="sidebar">
                    <div class="sidebar__item">
                        <h4>Kategoriler</h4>
                        <ul class="categorylist">
                            <li class="active" categoryid="-1">  <a href="#category--1" onclick="filterCategory(-1,0,this)">Tüm Kategoriler</a> </li>
                            @foreach (var item in Model.categories)
                            {

                                <li categoryid="@item.id" categorytype="0">
                                    <a href="#category-@item.id" onclick="filterCategory(@item.id,0,this)">@item.name</a> @*kategori 0, subcategory 1*@
                                    @if (Model.sub_categories.Any(x => x.parent_id == item.id))
                                    {<ul>


                                            @foreach (var subcategory in Model.sub_categories.Where(x => x.parent_id == item.id))
                                            {
                                                <li style="padding-left:8px;" categoryid="@subcategory.id" categorytype="1">
                                    <a href="#subcategory-@subcategory.id" onclick="filterCategory(@subcategory.id,1,this)">@subcategory.name</a></li>
                                            }
                                        </ul>


                                    }
                                </li>
                            }
                        </ul>
                    </div>
                    <div class="sidebar__item">
                        <h4>Fiyat</h4>
                        <div class="price-range-wrap">
                            <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                 data-min="@Math.Round((decimal)Model.products_skus.Min(x => x.price))" data-max="@Math.Round((decimal)Model.products_skus.Max(x => x.price))">
                                <div class="ui-slider-range ui-corner-all ui-widget-header"></div>
                                <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                            </div>
                            <div class="range-slider">
                                <div class="price-input">
                                    &#8378;<input type="text" id="minamount">
                                    &#8378;<input type="text" id="maxamount">
                                </div>
                            </div>
                        </div>
                    </div>
                    @*<div class="sidebar__item sidebar__item__color--option">
                            <h4>Colors</h4>
                            <div class="sidebar__item__color sidebar__item__color--white">
                                <label for="white">
                                    White
                                    <input type="radio" id="white">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--gray">
                                <label for="gray">
                                    Gray
                                    <input type="radio" id="gray">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--red">
                                <label for="red">
                                    Red
                                    <input type="radio" id="red">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--black">
                                <label for="black">
                                    Black
                                    <input type="radio" id="black">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--blue">
                                <label for="blue">
                                    Blue
                                    <input type="radio" id="blue">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--green">
                                <label for="green">
                                    Green
                                    <input type="radio" id="green">
                                </label>
                            </div>
                        </div>
                        <div class="sidebar__item">
                            <h4>Popular Size</h4>
                            <div class="sidebar__item__size">
                                <label for="large">
                                    Large
                                    <input type="radio" id="large">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="medium">
                                    Medium
                                    <input type="radio" id="medium">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="small">
                                    Small
                                    <input type="radio" id="small">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="tiny">
                                    Tiny
                                    <input type="radio" id="tiny">
                                </label>
                            </div>
                        </div>*@
                    <div class="sidebar__item">
                        <div class="latest-product__text">
                            <h4>Son Eklenen Ürünler</h4>
                            <div class="latest-product__slider owl-carousel">



                                @{
                                    var list = Model.products.OrderBy(x => x.id).Take(6).ToArray();

                                }



                                @{
                                    int a = 0;
                                }
                                @for (int d = 0; d < 2; d++)
                                {
                                    <div class="latest-product__slider__item">
                                        @for (int j = 0; j < 3; j++)
                                        {
                                            if (a >= list.Count())
                                            {
                                                break;
                                            }

                                            <a href="#" class="latest-product__item">
                                                <div class="latest-product__item__pic">
                                                    <img src="@(list[a].cover != null ? list[a].cover : Url.Content("~/Content/theme/images/empty.png"))" alt="">
                                                </div>
                                                <div class="latest-product__item__text">
                                                    <h6>@list[a].name</h6>
                                                    <span>&#8378;@list[a].products_skus.FirstOrDefault().price</span>
                                                </div>
                                            </a>

                                            a++;
                                        }
                                    </div>
                                }



                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-7">
                <div class="product__discount">
                    <div class="section-title product__discount__title">
                        <h2>İndirimdekiler</h2>
                    </div>
                    <div class="row">
                        <div class="product__discount__slider owl-carousel">


                            @foreach (var product in Model.products.Where(x => x.products_skus.FirstOrDefault().old_price != null))
                            {

                                var discount = (product.products_skus.FirstOrDefault(x => x.product_id == product.id).price / product.products_skus.FirstOrDefault(x => x.product_id == product.id).old_price * 100);
                                <div class="col" style="margin:0 20px 0 20px">
                                    <div class="product__discount__item">
                                        <div class="product__discount__item__pic set-bg"
                                             data-setbg="@(product.cover != null ? product.cover : Url.Content("~/Content/theme/images/empty.png"))">




                                            <div class="product__discount__percent">-@(100-Math.Round((decimal)discount))%</div>
                                            <ul class="product__item__pic__hover">
                                                <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                                <li><a href="#"><i class="fa fa-retweet"></i></a></li>
                                                <li><a onclick="AddCart(@product.id)"><i class="fa fa-shopping-cart"></i></a></li>
                                            </ul>
                                        </div>
                                        <div class="product__discount__item__text">
                                            <span></span>
                                            <h5><a href="#">@product.name</a></h5>
                                            <div class="product__item__price">&#8378;@product.products_skus.FirstOrDefault().price <span>&#8378;@product.products_skus.FirstOrDefault().old_price</span></div>
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>
                    </div>
                </div>

                <div class="productsContainer">
                    @Html.Action("GetProductsPartial", "Home", new { CategoryId = -1, PriceRange = "All", PageNumber = 1 })
                </div>



            </div>
        </div>
    </div>
</section>
<!-- Product Section End -->
<script src="~/Content/css/shoppage/js/bootstrap.min.js"></script>
<script src="~/Content/css/shoppage/js/jquery-ui.min.js"></script>
<script src="~/Content/css/shoppage/js/jquery.nice-select.min.js"></script>
<script src="~/Content/css/shoppage/js/jquery.slicknav.js"></script>
<script src="~/Content/css/shoppage/js/mixitup.min.js"></script>
<script src="~/Content/css/shoppage/js/owl.carousel.min.js"></script>
<script src="~/Content/css/shoppage/js/main.js"></script>


<script src="~/Scripts/jquery-3.7.1.js"></script>


<script>




    function AddCart(id) {
        $.ajax({
            url: '/Home/AddCart/',
            type: 'POST',
            data: { Id: id, Adet: 1 },
            success: function (response) {
                if (response.success) {
                    toastr.success(response.message);
                    $('#cartItemsList').html(response.cartItemsHtml);
                    var cartCount = $(response.cartItemsHtml).find(".cart-item").length;
                    $(".header-cart-count").text(cartCount);
                } else {
                    toastr.error(response.message);
                }
            },
            error: function (xhr, status, error) {
                toastr.error("Bir hata oluştu: " + error);
            }
        });
    }


    $(document).on("click", ".product__pagination a", function (event) {
        event.preventDefault();
        var categoryId = $(this).attr('categoryId');
        var priceRange = $('#minamount').val() + "-" + $('#maxamount').val();
        var pageNumber = $(this).attr("pn");

        console.log(categoryId);
        console.log(pageNumber);

        $.ajax({
            url: '/Home/GetProductsPartial/',
            type: 'POST',
            data: { CategoryId: parseInt(categoryId), PriceRange: priceRange, PageNumber: parseInt(pageNumber) },
            success: function (response) {
                $('.productsContainer').fadeOut(300, function () {
                    $(this).empty();
                   
                    $(this).fadeIn(300, function () {
                        $('html, body').animate({
                            scrollTop: $(".productsContainer").offset().top
                        }, 300);
                    });
                    $(this).html(response);
                    $('.set-bg').each(function () {
                        var bg = $(this).data('setbg');
                        $(this).css('background-image', 'url(' + bg + ')');
                    });
                });
            },
            error: function (xhr, status, error) {
                // Hata durumunu ele alabilirsiniz
            }
        });
    });


    function filterCategory(categoryId, categoryType, element) {
        var priceRange = $('#minamount').val() + "-" + $('#maxamount').val();

        $.ajax({
            url: '/Home/GetProductsPartial/',
            type: 'POST',
            data: { CategoryId: parseInt(categoryId), CategoryType: categoryType, PriceRange: priceRange, PageNumber: 1 },
            success: function (response) {
                $('.productsContainer').fadeOut(300, function () {
                    $(this).empty();
                    $(this).html(response);

                    // Background resimleri ayarla
                    $('.set-bg').each(function () {
                        var bg = $(this).data('setbg');
                        $(this).css('background-image', 'url(' + bg + ')');
                    });

                    $(this).fadeIn(300, function () {
                        $('html, body').animate({
                            scrollTop: $(".productsContainer").offset().top
                        }, 300);
                    });
                });

                // Aktif sınıfını güncelle
                $('.sidebar__item ul li').removeClass('active'); // Tüm li'lerden active sınıfını kaldır

                // Aktif olan öğeye active sınıfını ekle
                $(element).closest('li').addClass('active');
                $('.sidebar__item ul [categoryid="' + categoryId + '"][categorytype="' + categoryType + '"]').addClass('active');
            },
            error: function (xhr, status, error) {
                console.error("AJAX Error: ", error);
            }
        });
    }



    function checkHashAndFilter() {
        var hash = window.location.hash.substring(1);
        if (hash) {
            var parts = hash.split('-');
            if (parts.length === 2) {
                var type = parts[0];
                var id = parseInt(parts[1]);
                if (!isNaN(id)) {
                    var categoryType = (type === 'category') ? 0 : 1;
                    filterCategory(id, categoryType);
               
                }
            }
        }
    }

    $(document).ready(function () {
        // Sayfa yüklendiğinde hash'i kontrol et
        checkHashAndFilter();

        // Hash değiştiğinde hash'i kontrol et
        $(window).on('hashchange', function () {
            checkHashAndFilter();
        });
    });


</script>